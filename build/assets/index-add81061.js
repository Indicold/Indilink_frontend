import{r as o,K as Y,aa as G,ac as T,ag as j,j as e,ae as W,ad as X}from"./index-5844006b.js";import{c as Z,a as y,h as ee,F as se,d as te,e as ae,f,g,I as p,B as re}from"./index.esm-1de59bdb.js";/* empty css                      */import"./Views-d4e96890.js";import"./isNil-a0467d53.js";function ne(c,l){return fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then(s=>{if(!s.ok)throw new Error(`Request failed with status: ${s.status}`);return s.json()}).then(s=>{if(console.log("responseData",s),s)return s;throw new Error(s.user_id)}).catch(s=>({statusCode:500,message:s.message||"An error occurred"}))}function R(c){const[l,s]=o.useState(null),[m,u]=o.useState(!1);return{result:l,loading:m,sendPostRequest:async h=>{u(!0);const x=await ne(c,h);s(x),u(!1)}}}function oe(c,l){return fetch(c,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then(s=>{if(!s.ok)throw new Error(`Request failed with status: ${s.status}`);return s.json()}).then(s=>{if(console.log("responseData",s),s)return s;throw new Error(s.user_id)}).catch(s=>({statusCode:500,message:s.message||"An error occurred"}))}function le(c){const[l,s]=o.useState(null),[m,u]=o.useState(!1);return{result:l,loading:m,sendPostRequest:async h=>{u(!0);const x=await oe(c,h);s(x),u(!1)}}}const ie=Z().shape({userName:y().required("Please enter your user name"),email:y().email("Invalid email").required("Please enter your email"),password:y().required("Please enter your password"),confirmPassword:y().oneOf([ee("password")],"Your passwords do not match")}),ce=c=>{var C,k,S,I,q,B,E,P,$,A,O,L;const l=Y(a=>a==null?void 0:a.auth),[s,m]=o.useState(!1),[u,N]=o.useState(!0),[h,x]=o.useState(""),[b,_]=o.useState((C=l==null?void 0:l.details)==null?void 0:C.data),{result:r,loading:de,sendPostRequest:H}=R("https://seal-app-uqxwl.ondigitalocean.app/auth/getOTP"),{result:i,loading:me,sendPostRequest:U}=R("https://seal-app-uqxwl.ondigitalocean.app/auth/getGstDetails"),{result:n,loading:he,sendPostRequest:D}=le("https://seal-app-uqxwl.ondigitalocean.app/auth/verifyOTP"),{className:J}=c,z=G(),F=T(),t=i==null?void 0:i.message,[K,v]=o.useState(!1),Q=async a=>{if(a.preventDefault(),h){let d={user_id:r==null?void 0:r.user_id,otp:h};D(d)}},V=a=>{var M;const d={...b};d[a.target.name]=a.target.value,_(d),((M=d==null?void 0:d.gst)==null?void 0:M.length)==16&&(N(!1),z(X(b)),U(b))},w=()=>{m(!0),v(!0),H(b),m(!1)};return o.useEffect(()=>{n!=null&&n.message&&j.success(n==null?void 0:n.message,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,style:{background:"#6aa5fc",color:"#fff"}}),n!=null&&n.status&&setTimeout(()=>{F("/sign-in")},2e3)},[n==null?void 0:n.message]),o.useEffect(()=>{i!=null&&i.message&&(console.log("GSTResponse",i),j.success("GST Detail fetch Successfully !",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,style:{background:"#6aa5fc",color:"#fff"}}))},[i==null?void 0:i.message]),o.useEffect(()=>{r!=null&&r.message&&j.success(r==null?void 0:r.message,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,style:{background:"#6aa5fc",color:"#fff"}})},[r==null?void 0:r.message]),e.jsxs("div",{className:J,children:[e.jsx(W,{}),K?e.jsx("div",{id:"authentication-modal",tabIndex:-1,"aria-hidden":"true",className:"otp-modal fixed top-0 left-0 right-0 z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full",children:e.jsx("div",{className:"relative w-full max-w-md max-h-full",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow dark:bg-gray-700",children:[e.jsxs("button",{onClick:()=>v(!1),type:"button",className:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"authentication-modal",children:[e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e.jsx("span",{className:"sr-only",children:"Close modal"})]}),e.jsxs("div",{className:"px-6 py-6 lg:px-8",children:[e.jsx("h3",{className:"mb-4 text-xl font-medium text-gray-900 dark:text-white",children:"An OTP has been sent to your email. Please enter here."}),e.jsxs("form",{className:"space-y-6",onSubmit:a=>Q(a),children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"OTP"}),e.jsx("div",{className:"otp mx-auto",children:e.jsx("input",{type:"text",className:"w-full p-4 rounded-[3px]",placeholder:"Enter OTP here.",onChange:a=>x(a.target.value)})})]}),e.jsx("button",{type:"submit",className:"w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Submit"}),e.jsxs("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-300",children:["Didn't receive email? ",e.jsx("a",{href:"#",className:"text-blue-700 hover:underline dark:text-blue-500",onClick:w,children:"Resend OTP"})]})]})]})]})})}):e.jsx(e.Fragment,{}),e.jsx(se,{initialValues:{country:"india",gst:(k=t==null?void 0:t.taxpayerInfo)==null?void 0:k.gstin,pancardno:(S=t==null?void 0:t.taxpayerInfo)==null?void 0:S.panNo,designation:(I=t==null?void 0:t.taxpayerInfo)==null?void 0:I.ctb,firmName:(q=t==null?void 0:t.taxpayerInfo)==null?void 0:q.tradeNam,firm:(E=(B=t==null?void 0:t.taxpayerInfo)==null?void 0:B.pradr)==null?void 0:E.ntr},validationSchema:ie,children:e.jsx(te,{className:"signup-form",children:e.jsxs(ae,{children:[e.jsx(f,{label:"CIN No",className:"mx-auto cin-number",children:e.jsx(g,{type:"text",autoComplete:"off",name:"gst",placeholder:"CIN No",onChange:a=>V(a),component:p,className:""})}),e.jsxs("div",{className:"flex",children:[e.jsx(f,{label:"Country",className:"me-auto",children:e.jsx(g,{type:"text",autoComplete:"off",name:"country",placeholder:"Country",component:p,className:""})}),e.jsx(f,{label:"Pan Card No.",className:"me-auto",children:e.jsx(g,{type:"text",autoComplete:"off",name:"pancardno",placeholder:"Pan Card No.",value:(P=t==null?void 0:t.taxpayerInfo)==null?void 0:P.panNo,component:p,className:""})})]}),e.jsxs("div",{className:"flex",children:[e.jsx(f,{label:"User Designation",className:"me-auto",children:e.jsx(g,{type:"text",autoComplete:"off",name:"designation",placeholder:"User Designation",value:($=t==null?void 0:t.taxpayerInfo)==null?void 0:$.ctb,component:p,className:""})}),e.jsx(f,{label:"Firm Type",className:"me-auto",children:e.jsx(g,{type:"text",autoComplete:"off",name:"firm",placeholder:"Firm Type",value:(O=(A=t==null?void 0:t.taxpayerInfo)==null?void 0:A.pradr)==null?void 0:O.ntr,component:p,className:""})})]}),e.jsx("div",{className:"flex",children:e.jsx(f,{label:"Firm Name",className:"me-auto",children:e.jsx(g,{type:"text",autoComplete:"off",name:"firmName",placeholder:"Firm Name",value:(L=t==null?void 0:t.taxpayerInfo)==null?void 0:L.tradeNam,component:p,className:""})})}),e.jsx("div",{className:"flex",children:e.jsx(re,{block:!0,loading:s,disabled:u,variant:"solid",onClick:w,className:"signup-submit-btn mx-auto rounded-xl px-4 shadow-lg",children:s?"Creating Account...":"Submit"})})]})})})]})},ue=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-8",children:e.jsx("h3",{className:"mb-1 text-center",children:"Basic Information"})}),e.jsx(ce,{disableSubmit:!1})]}),ye=ue;export{ye as default};
